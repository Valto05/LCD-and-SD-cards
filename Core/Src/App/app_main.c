#include "main.h"
//#include "app_main.h"
#include <stdlib.h>
#include <stdio.h>

#define CASET 0x2a
#define RASET 0x2b
#define CMD0 (0x40 + 0)
#define CMD8 0x40 + 8
#define CMD55 0x40 + 55
#define ACMD41 0x40 + 41
#define SD_CS_DESELECT() HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_SET)
#define SD_CS_SELECT() HAL_GPIO_WritePin(CS_GPIO_Port, CS_Pin, GPIO_PIN_RESET)


/*
const uint16_t picture[20480] = {
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xc6bc, 0xce9c, 0xcebc, 0xc6bd, 0xce9c, 0xc6bc, 0xce9c, 0xcebe, 0xcebd, 0xce9c, 0xce9d, 0xce9c, 0xce9c, 0xcebd, 0xc6bd, 0xc6dd, 0xc6dd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xce9c, 0xcebc, 0xcebe, 0xc6bd, 0xcebc, 0xcebd, 0xc69c, 0xcebc, 0xce9c, 0xcebc, 0xcebc, 0xc6bd, 0xcebe, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebc,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xc6bc, 0xcebc, 0xc6bd, 0xc6bd, 0xcebd, 0xc65b, 0xc61a, 0xb598, 0xc5fa, 0xc65b, 0xcebd, 0xce9d, 0xce9d, 0xcebc, 0xcebc, 0xc6bc, 0xc6bc, 0xc6bc, 0xc6bc, 0xc6bc, 0xc69d, 0xcebd, 0xc6bc, 0xcebd, 0xcedd, 0xd6dd, 0xc67b, 0xcebc, 0xd6fd, 0xd6fd, 0xcebc, 0xcebc, 0xcebc, 0xc6bd, 0xc6bc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xc69c, 0xcebd, 0xcedd, 0xce5b, 0x8430, 0x9431, 0x9c92, 0x9491, 0x9cd3, 0x73af, 0xb5b8, 0xdf1d, 0xd6bc, 0xce9b, 0xd6dd, 0xd6dd, 0xd6fd, 0xd6bd, 0xd6fd, 0xd6fe, 0xd6fd, 0xd6dd, 0xd6bc, 0xa556, 0x9d15, 0x73d0, 0x634e, 0x73f0, 0x6b8f, 0xb5d8, 0xcebc, 0xcebd, 0xc69d, 0xc6bd, 0xc69c, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebc, 0xcebc,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xce9c, 0xcebd, 0xb5d8, 0x9cd4, 0xd658, 0xbdb5, 0xbd73, 0xce15, 0xcdf6, 0x9cb1, 0x7bae, 0x736e, 0x83ef, 0x736d, 0x630c, 0x840f, 0x6b6e, 0x94d3, 0x9cf3, 0x6b8f, 0x8c92, 0x9cf3, 0x5aca, 0xa4f2, 0xdeda, 0xdeda, 0xb575, 0xa4f2, 0x630b, 0x5b0c, 0xadb7, 0xd6fd, 0xc69d, 0xc6bd, 0xc69c, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcebc,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xd6bd, 0x7bcf, 0xd618, 0x9450, 0x6b0a, 0x83ee, 0x8bee, 0xbd94, 0xc5d5, 0xbd94, 0xad12, 0xcdd5, 0xde77, 0xde98, 0xd657, 0xcdd6, 0xacf2, 0xb534, 0xc5b6, 0x9cb1, 0x8c0e, 0xad33, 0xd657, 0x9cd0, 0x83ed, 0xad32, 0xc5d4, 0xc5d5, 0x6b4b, 0x5acb, 0x4a8b, 0xbe9c, 0xcebc, 0xce9c, 0xc6bd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebc,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcedd, 0xa536, 0x9cf3, 0xb554, 0x2903, 0x3184, 0x18e2, 0x2103, 0x41e6, 0x83ac, 0xacb1, 0xc593, 0xbd73, 0xc573, 0xc573, 0xbd72, 0xc593, 0xc573, 0xbd73, 0xc573, 0xcdb4, 0xcdb4, 0xc5b3, 0x9c4e, 0x41c4, 0x62c9, 0x7b4b, 0xb532, 0xb532, 0xbd73, 0x6b4c, 0x8451, 0xd6fd, 0xce9c, 0xc69c, 0xcebd, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebd,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcedd, 0xa557, 0x9451, 0xacf2, 0x39e6, 0x0020, 0x1081, 0x1060, 0x62c8, 0xbd73, 0xc5b3, 0xcd92, 0xc593, 0xc572, 0xc572, 0xacaf, 0xbd31, 0xcd93, 0xcd52, 0xbd11, 0xb4ef, 0xacf0, 0xb511, 0x7b6a, 0x41a4, 0x3164, 0x3984, 0x6ae9, 0x8bed, 0x9c6f, 0x4a47, 0xad36, 0xcefd, 0xc6bd, 0xc69c, 0xc6bc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xc6bc, 0xcedd, 0xadb8, 0x62cb, 0x9470, 0x840e, 0x2964, 0x4226, 0x83ed, 0xacd0, 0xb511, 0xbd31, 0xbd11, 0xb4f0, 0xb4f0, 0xa46e, 0xbd72, 0xc572, 0xbd31, 0xacaf, 0xb4d0, 0xacd0, 0xb511, 0xacf0, 0x7309, 0x5a67, 0x0840, 0x1080, 0x4a26, 0xacf1, 0xc5b5, 0x5289, 0xc619, 0xc6dd, 0xc6dd, 0xc6bc, 0xc6dd, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebd,
		0xcebd, 0xcebd, 0xcebd, 0xcebd, 0xcebc, 0xcebc, 0xcebc, 0xcedd, 0xc63a, 0x5aab, 0x9c91, 0x5288, 0x62e9, 0x8c2e, 0x9c6e, 0xb510, 0xb511, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4f0, 0xa4af, 0xb4f0, 0xb4ef, 0xb4f0, 0xb4f1, 0xb4f0, 0xb4d0, 0xb4cf, 0xb4cf, 0xacaf, 0x838b, 0x41a5, 0x0820, 0x4206, 0xa4d0, 0xbd94, 0x41e6, 0x9493, 0xcedd, 0xc6dc, 0xc6bc, 0xc6bc, 0xc6bc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebd,
		0xcebc, 0xcebc, 0xcebd, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xc6bd, 0xce9c, 0x7b8e, 0x5a88, 0x7b8b, 0x940d, 0x8bcc, 0x5a26, 0x3101, 0x83ac, 0xbd52, 0xb511, 0x8bac, 0x6267, 0x6ae9, 0x6ac8, 0x93ed, 0x93ec, 0x7309, 0x836a, 0x942d, 0xb4f0, 0xb4cf, 0xacce, 0x9c4d, 0x83cd, 0x6b2a, 0x9c4f, 0xad10, 0x944f, 0x3164, 0x7bd0, 0xcedc, 0xc6bc, 0xc6bc, 0xc6bc, 0xc6bc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd, 0xcebd,
		0xcebc, 0xcebc, 0xc6bc, 0xcebc, 0xcebd, 0xcebc, 0xcedd, 0xd6dd, 0xc65b, 0x3166, 0x7b6c, 0x942e, 0x9c4e, 0x8bed, 0x838c, 0x6aea, 0x0820, 0x39a5, 0x840e, 0x1080, 0x2902, 0x7b6c, 0x3164, 0x41a5, 0x41e5, 0x6b09, 0x736b, 0x83cc, 0x9c2d, 0xb4af, 0xacaf, 0xacaf, 0x942d, 0x83ac, 0x6ae8, 0x83ab, 0x7b8c, 0x41e7, 0x94b3, 0xcefd, 0xc69c, 0xc6bc, 0xc6bc, 0xc6bd, 0xc6bd, 0xcebd, 0xcebc, 0xcebd, 0xcebd, 0xcebd,
		0xc6bc, 0xc6bd, 0xc6bd, 0xcebc, 0xce9c, 0xc69c, 0xc6bc, 0xd6dd, 0x94d4, 0x6b0c, 0x940e, 0x9c6e, 0xa4cf, 0x730a, 0x6aea, 0x630a, 0x62eb, 0x0000, 0x0000, 0x4206, 0x736c, 0x28e2, 0x4206, 0x4227, 0x4206, 0x39a5, 0x41a5, 0x734a, 0xa48e, 0xb4f0, 0xb4f0, 0xa46e, 0x93ed, 0x940e, 0x942d, 0x9c4d, 0xb512, 0x62a9, 0x83cf, 0xd71d, 0xc6dc, 0xc69c, 0xcebd, 0xcedd, 0xc6bc, 0xcebd, 0xcebc, 0xcebd, 0xcebd, 0xcebd,
		0xc6bc, 0xc6bc, 0xcebc, 0xce9c, 0xc69c, 0xc6bd, 0xbe9c, 0xd6fd, 0x73af, 0xad13, 0x9c4e, 0xaccf, 0x8bec, 0x732b, 0x630b, 0x3165, 0x0000, 0x0000, 0x3985, 0xbdd5, 0xc5d5, 0xa4b1, 0x41e5, 0x0840, 0x6b2c, 0xad13, 0xa4d1, 0x5a48, 0x9c4e, 0xb4f0, 0xb4f0, 0xb4d0, 0xacd0, 0xa46e, 0x93ed, 0x8bec, 0x8bac, 0x9c70, 0x62ab, 0xcedb, 0xcebc, 0xcebd, 0xcebc, 0xcebd, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebd, 0xcebd,
		0xce9c, 0xcebc, 0xc6bc, 0xce9c, 0xc6bd, 0xbe9d, 0xcede, 0x7c31, 0xb5b6, 0x9c50, 0xacf0, 0xacd0, 0x9c6e, 0x83ac, 0x4206, 0x5269, 0xd658, 0x7b6d, 0x41a5, 0xd636, 0xbd94, 0xbdd4, 0x4a47, 0x3184, 0xd679, 0x62aa, 0x4a27, 0x7b4c, 0xa46e, 0xb4cf, 0xaccf, 0xb4f0, 0xb4d0, 0xacd0, 0xb4f0, 0xacaf, 0x9c6e, 0xa46e, 0xa4b1, 0x4248, 0xc5fa, 0xd6dd, 0xc69c, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebd, 0xcebc, 0xcebd,
		0xc6bd, 0xc6bd, 0xc6bd, 0xc69c, 0xc69c, 0xc69c, 0xd6fd, 0x94b3, 0x9c92, 0xc594, 0xacd0, 0xacef, 0xaccf, 0xbd32, 0x9c70, 0xad13, 0xd658, 0x83ad, 0x83ad, 0xd616, 0xc593, 0xc615, 0x5aa8, 0x20c2, 0x8c0f, 0xa4d2, 0x83ad, 0xbd72, 0xacd0, 0xa46e, 0x93cc, 0xa44d, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4ef, 0xacef, 0x9c6d, 0xaccf, 0xad11, 0x62ec, 0xc61a, 0xce9c, 0xce9c, 0xc69c, 0xcebc, 0xcebc, 0xcebc, 0xcebc, 0xcebd,
		0xcebc, 0xc6bc, 0xc6bc, 0xc69c, 0xc69c, 0xcedd, 0x9d15, 0x83f0, 0xd658, 0xacb0, 0xb4d0, 0xaccf, 0xb4ef, 0xaccf, 0x9c4f, 0x83ee, 0x83ad, 0x1040, 0xc5d5, 0xbd74, 0xc5b3, 0xc5d4, 0x946f, 0x6aea, 0x734c, 0x732a, 0x8bed, 0xaccf, 0xb4cf, 0xb4cf, 0xac8f, 0xacaf, 0xaccf, 0xb4d0, 0xb4cf, 0xaccf, 0xacf0, 0xa48e, 0x942c, 0xad10, 0x83cd, 0x7bd0, 0xd6fd, 0xc69c, 0xcebd, 0xcebc, 0xcebc, 0xcebd, 0xcebc, 0xcebd,
		0xcebc, 0xc6bd, 0xc6bc, 0xc6bc, 0xc6bc, 0xd71d, 0x5b0d, 0xc5f7, 0xf71b, 0xd5d4, 0xacae, 0xb4ef, 0xb4ef, 0xb4cf, 0xacd1, 0xa4f1, 0x2902, 0xacf1, 0xd657, 0xc5b4, 0xc592, 0xc593, 0xcdd5, 0xc5d5, 0xb533, 0xbd52, 0xc572, 0xb4f0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4f0, 0xacd0, 0xb4d0, 0xb4cf, 0xacaf, 0xaccf, 0xb4f0, 0x9c4d, 0x9c2d, 0xacf2, 0x736d, 0xa597, 0xcedc, 0xc6bc, 0xc6bc, 0xc6bd, 0xc6bd, 0xc6bc, 0xcebd,
		0xcebc, 0xc6bd, 0xc6bd, 0xc6bc, 0xcedd, 0x9d77, 0x6b4d, 0xef1b, 0xcdf5, 0xacaf, 0xb4cf, 0xb4cf, 0xb4cf, 0xacef, 0xad31, 0x7b8c, 0xc5b4, 0xd657, 0xbd94, 0xc5d4, 0xc5b3, 0xc5b3, 0xc593, 0xc593, 0xc5b4, 0xc593, 0xbd31, 0xacaf, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4af, 0xb4ef, 0xb4f0, 0xa44d, 0x9c0d, 0xa4b0, 0xad12, 0x73ae, 0xcebc, 0xcebc, 0xc6bc, 0xc6bc, 0xc6bd, 0xcebc, 0xcebc,
		0xcebc, 0xc6bd, 0xc6bc, 0xc69d, 0xcedd, 0xcedd, 0x528a, 0xde79, 0xc594, 0xacd0, 0xb4b0, 0xb4d0, 0xb4cf, 0xb511, 0xa4f0, 0xd636, 0xce16, 0xbd74, 0xbd74, 0xb573, 0xcdf5, 0xc5d4, 0xc5b3, 0xc5b4, 0xc5b4, 0xbd52, 0xacaf, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xacaf, 0xb4cf, 0xa48e, 0x9c2d, 0x9c2d, 0xbd73, 0x5289, 0xb619, 0xcedc, 0xc6bc, 0xc6bc, 0xcebd, 0xcebc, 0xcebd,
		0xcebc, 0xc6bd, 0xc6bd, 0xc6bd, 0xcf1d, 0x6bd0, 0x7c0f, 0xf73b, 0xde57, 0xa48e, 0xb4cf, 0xb4d0, 0xb4f0, 0x730a, 0x3142, 0x732a, 0x730a, 0x6ac9, 0x6aea, 0x6309, 0x5247, 0x946f, 0xce15, 0xc5d4, 0xc5b4, 0xc553, 0xb4b0, 0xb4d0, 0xb4b0, 0xb4d0, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xa48e, 0x9c2d, 0x942d, 0xacb0, 0x6b2b, 0xad56, 0xcedc, 0xc6bc, 0xc6bd, 0xc69d, 0xcebc, 0xcebd,
		0xcebc, 0xc6bd, 0xc6bd, 0xc6bd, 0xcedd, 0xce9b, 0x5aea, 0xef1a, 0xb4f0, 0xb4d0, 0xb4f0, 0xacaf, 0xacf1, 0x1861, 0x49e6, 0x5247, 0x5247, 0x5247, 0x5247, 0x5aa9, 0x7b8d, 0x0840, 0x8c2e, 0xbdb4, 0xc593, 0xcd73, 0xb4d0, 0xb4b0, 0xb4af, 0xb4b0, 0xb4d0, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4f0, 0xa48f, 0x9c2d, 0x9c4d, 0x9c4e, 0x9c50, 0x738f, 0xd6fc, 0xcebc, 0xcebd, 0xcebd, 0xcebc, 0xcebc,
		0xcebd, 0xc6bd, 0xcebd, 0xc6bd, 0xcefd, 0x8cd4, 0x840f, 0xef19, 0xbd52, 0xb4af, 0xb4f0, 0xb4cf, 0xb512, 0x20a2, 0x3964, 0x4a27, 0x62aa, 0x5248, 0x4a27, 0x5248, 0x5a89, 0x1020, 0x9c8f, 0xc5d4, 0xbdb3, 0xc5b3, 0xc532, 0xb4af, 0xb4af, 0xb4af, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4b0, 0xb4d0, 0xb4cf, 0xb4d0, 0xa46e, 0x9c4d, 0x9c0c, 0x9c2d, 0xa490, 0x6b2d, 0xad77, 0xcedc, 0xcebd, 0xcebd, 0xcebc, 0xc6bc,
		0xcebc, 0xc69c, 0xc6bd, 0xcebd, 0xcedc, 0xcedc, 0x632c, 0xf77a, 0xc593, 0xaccf, 0xb4d0, 0xb4d0, 0xb511, 0x838c, 0x3103, 0x3124, 0x3965, 0x3985, 0x3985, 0x5a68, 0x3164, 0x5247, 0xd616, 0xcdb4, 0xc5d4, 0xc5b4, 0xbd31, 0xb4af, 0xb4af, 0xb4cf, 0xb4b0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4af, 0xb4f0, 0xa46e, 0x9c4d, 0xa42d, 0xa44d, 0xa490, 0x738e, 0x94d4, 0xd6dc, 0xce9c, 0xc6bd, 0xc6bc, 0xc6bc,
		0xc69c, 0xc6bc, 0xc69c, 0xc69d, 0xce9c, 0x3a09, 0xdeba, 0xe6d9, 0xacb0, 0xb4ef, 0xb4ef, 0xaccf, 0xb4f0, 0xb531, 0x7b4b, 0x3984, 0x28e2, 0x3984, 0x3123, 0x3123, 0x18a0, 0xbd53, 0xc5d5, 0xc593, 0xbdd4, 0xc5f5, 0xcd93, 0xb4f0, 0xb4b0, 0xb4cf, 0xb4b0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4d0, 0x9c4e, 0x9c2d, 0xa46e, 0x940d, 0x49c6, 0x5249, 0xc65a, 0xbdf9, 0xc65b, 0xcedc, 0xd71e, 0xd6fd,
		0xc69b, 0xc6bc, 0xc6dc, 0xcedd, 0xd6dd, 0xad56, 0x9c92, 0xeeb9, 0xacb0, 0xb4cf, 0xaccf, 0xaccf, 0xacef, 0xb4ef, 0xa48f, 0x6aea, 0xa490, 0x9c4f, 0xa4d1, 0xb532, 0xc5b4, 0xcdd5, 0xc5b5, 0xcdf4, 0xc636, 0x4a68, 0x0800, 0x41a4, 0xbd10, 0xb4af, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4f0, 0x9c4e, 0x9c2e, 0x9c4e, 0x940d, 0x1041, 0x736e, 0xbdf8, 0xad97, 0x8cb4, 0x5b0e, 0x31e9, 0x8493,
		0xcedc, 0xdf5e, 0xc69b, 0x94d4, 0x73d0, 0x39c7, 0xe699, 0xcdd5, 0xac8f, 0xb4d0, 0xb4f0, 0xacf0, 0xacd0, 0xb4cf, 0xa48f, 0x5226, 0xde78, 0xcdd5, 0xb532, 0x944f, 0x838c, 0x8bcd, 0x838d, 0x7b6b, 0x8c51, 0x528c, 0x0000, 0x6aea, 0xbd31, 0xb4d0, 0xb4cf, 0xb4af, 0xb4b0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xac8e, 0xa44d, 0x8bcc, 0x8bcc, 0x8bed, 0x3144, 0x41e8, 0x83f0, 0xa595, 0xdf1b, 0xe73c, 0xce7a, 0x4a8a,
		0x9d35, 0x5aec, 0x5aed, 0xbdd8, 0xffff, 0x9492, 0x9c91, 0xbd53, 0xacb0, 0xbcf0, 0xacd0, 0xacef, 0xb4af, 0xb4d0, 0xb4f1, 0x730a, 0x730a, 0x6ac9, 0x736b, 0x83cd, 0x8bed, 0xa470, 0xbd33, 0xb532, 0xa515, 0x9d17, 0x9cf4, 0xb511, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4af, 0xb4cf, 0xb4d0, 0xb4cf, 0xb4ef, 0xacaf, 0xa48e, 0x940d, 0x6ae8, 0x7b8b, 0x41c5, 0x5248, 0x9cd3, 0x94f2, 0xbe17, 0xd6ba, 0xdeba, 0xdefb,
		0xad76, 0xef7e, 0xffff, 0xffff, 0xffff, 0xbdd7, 0x0840, 0xad11, 0xacf1, 0xb4d0, 0xb4f0, 0x9c6e, 0xb4cf, 0xb4ef, 0xb4d0, 0xb4f0, 0xc573, 0xc5b4, 0xad11, 0xacf1, 0xb4f2, 0x8bcd, 0x8bce, 0xc5f6, 0xb598, 0x94d6, 0x9cd3, 0xa4af, 0xb4f0, 0xb4f0, 0xb4cf, 0xb4d0, 0xb4cf, 0xb4ef, 0xb4cf, 0xb4f0, 0xb4f0, 0xb510, 0xa4af, 0x9c4e, 0x83ab, 0x83ab, 0x9c6f, 0x4205, 0x94b1, 0x94d2, 0xce58, 0xd6ba, 0xd69a, 0xd6ba,
		0xf7df, 0xf7de, 0xf7be, 0xffff, 0xffff, 0xf7be, 0x18e3, 0x41c5, 0xb532, 0xacd0, 0xa48f, 0x93ec, 0xacaf, 0xb4ef, 0xacd0, 0xb4f0, 0xacf0, 0xa4af, 0x940c, 0x9c4e, 0xbd53, 0xcdf5, 0xc5d5, 0xb575, 0x8c94, 0x8c33, 0x8c2f, 0x942d, 0xa46e, 0xac8e, 0xaccf, 0xb4f0, 0xb4ef, 0xb4ef, 0xb4ef, 0xacaf, 0xa48e, 0x9c2d, 0x9c4d, 0x944d, 0x942d, 0x8bec, 0x946e, 0x39c4, 0x9cd2, 0xb595, 0xd699, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffde, 0xffff, 0xffde, 0xfffe, 0xffff, 0x4207, 0x41a5, 0xb511, 0xb4d0, 0xacaf, 0x940d, 0xb4f0, 0xaccf, 0xacd0, 0xaccf, 0xacaf, 0xa48f, 0x8bcc, 0x838a, 0x6ac8, 0x62a7, 0x62c9, 0x6b2c, 0x8cb4, 0x8c51, 0x942f, 0x9c2d, 0x9c2d, 0xa48e, 0xaccf, 0xacd0, 0xacae, 0xa48e, 0x9c4d, 0x9c4d, 0x940c, 0xa46e, 0x9c2d, 0x942c, 0x9c4e, 0x942c, 0xa4f0, 0x3984, 0xad74, 0xb5b6, 0xd6ba, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffdf, 0xffff, 0xffde, 0xffff, 0xffff, 0xffff, 0x4a29, 0x9c70, 0xacf1, 0xacaf, 0xacaf, 0xa46f, 0xb4f0, 0xacd0, 0xacf0, 0xb4cf, 0xacaf, 0xac8f, 0x940d, 0x9c4d, 0xa48e, 0x9c8e, 0x9cb0, 0x94d3, 0x8c94, 0x942e, 0x9c2e, 0x9c4d, 0x9c4d, 0x9c4d, 0x9c0d, 0x9c2d, 0x9c4d, 0x9c4d, 0x9c4d, 0x9c4d, 0xa44d, 0x9c6e, 0x9c2d, 0xa4af, 0xacd0, 0x9c6e, 0x9c8f, 0x3164, 0xbdf6, 0xbdf7, 0xd6ba, 0xd69a, 0xd6ba, 0xd69a,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0x7baf, 0x5a48, 0xb512, 0xb4d0, 0xacd0, 0xacd0, 0xacd0, 0xacd0, 0xb4d0, 0xb4f0, 0xb4d0, 0xb4d0, 0xa46e, 0x944d, 0x9c2c, 0x942c, 0x8c2e, 0x8cb2, 0x8c73, 0x942e, 0x9c4e, 0x9c4d, 0x9c2d, 0x9c2d, 0xa48f, 0xaccf, 0xac8f, 0x9c2d, 0x9c2d, 0x9c2e, 0x9c4e, 0x940c, 0x83ab, 0x940c, 0x942d, 0xa4cf, 0x62e9, 0x5aa9, 0xbdd6, 0xce99, 0xd6ba, 0xd69a, 0xd69a, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xbdd6, 0x20c2, 0xbd53, 0xb4f0, 0xacaf, 0xb4f0, 0xaccf, 0xb4f0, 0xac8f, 0xb4af, 0xbcf0, 0xb4d0, 0xb4f0, 0xacf0, 0xac8e, 0x9c2d, 0x944e, 0x8cb2, 0x8c92, 0x942e, 0x9c2e, 0x9c4d, 0x9c4d, 0x9c2d, 0x9c4e, 0x9c4d, 0xa48e, 0xa46e, 0x8bec, 0xa42e, 0x9c4e, 0x83cb, 0x83ab, 0x7b8a, 0x7b6b, 0x8c4e, 0x20e2, 0x9471, 0xbdf7, 0xd6ba, 0xd699, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7bf, 0xffde, 0x0820, 0xa4d2, 0xb4d0, 0xb4b0, 0xb4f0, 0xb4b0, 0xb4d0, 0xac8f, 0x9c0d, 0xb4d0, 0xbcd0, 0xb4d0, 0xa4af, 0x9c2d, 0x9c4d, 0x944f, 0x8471, 0x8472, 0x942e, 0x9c2f, 0x9c2d, 0x9c2d, 0x9c2d, 0xa48e, 0xaccf, 0xacaf, 0xacaf, 0xa46e, 0x9c2e, 0x942d, 0x83ac, 0x83ab, 0x83ab, 0x838d, 0x6b0a, 0x18c2, 0xb5b6, 0xce79, 0xd6ba, 0xd6b9, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7be, 0xffff, 0x632c, 0x4207, 0xb532, 0xacaf, 0xb4ef, 0xb4b0, 0xb4d0, 0xac8f, 0xa44e, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4f0, 0xa46e, 0x9c4e, 0x944f, 0x94b1, 0x8c92, 0x942f, 0x942e, 0x9c4e, 0xac8f, 0xacf0, 0xacef, 0xaccf, 0xb4f0, 0xacaf, 0x9c6e, 0x8c0c, 0x83ab, 0x83ac, 0x7bad, 0x838b, 0x8bef, 0x1882, 0x7bcf, 0xc618, 0xd6b9, 0xd6b9, 0xd6b9, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7be, 0xffbf, 0xf7be, 0x1060, 0xa490, 0xbcf0, 0xb4af, 0xb4af, 0xac8f, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4d0, 0xb4ef, 0xaccf, 0xacf1, 0x9c8f, 0x944f, 0x942e, 0xa4af, 0xb4f0, 0xb4d0, 0xb4d0, 0xb4f0, 0xb4f0, 0x9c2d, 0x9c2d, 0x83ab, 0x838a, 0x83ab, 0x83ab, 0x838b, 0x940e, 0x41e7, 0x39c6, 0xc638, 0xd6ba, 0xd6ba, 0xd6b9, 0xd6b9, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0x9cd2, 0x20c1, 0xbd53, 0xaccf, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4b0, 0xb4cf, 0xb4cf, 0xaccf, 0xb4d0, 0xb4cf, 0xb4cf, 0xaccf, 0xb4d0, 0xac8f, 0xac8f, 0xa48e, 0xa46d, 0xa48e, 0xa48e, 0xa44d, 0x8bcb, 0x838b, 0x836a, 0x838a, 0x83ab, 0x83cb, 0x7b8b, 0x8c2d, 0x7b6c, 0x0840, 0xad75, 0xbdf7, 0xc618, 0xce79, 0xd69a, 0xd69a, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0x2924, 0x6aea, 0xbd31, 0xb4af, 0xb4b0, 0xb4d0, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4f0, 0xacd0, 0xb4d0, 0xb4cf, 0xb4af, 0xb4d0, 0xaccf, 0xb4d0, 0xb4ef, 0xb4f0, 0xacaf, 0x940c, 0x838b, 0x8bec, 0x8bec, 0x83ab, 0x838b, 0x83ac, 0x7bac, 0x83ed, 0x6b4a, 0x10a0, 0xa554, 0xceba, 0xc618, 0xad55, 0xc5f8, 0xd6ba, 0xd69a, 0xd69a, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7de, 0xf7df, 0xf7be, 0x0000, 0x93ed, 0xbcf1, 0xb4b0, 0xacd0, 0xaccf, 0xb4cf, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4d0, 0xb4af, 0xb4af, 0xb4af, 0xb4cf, 0xa48e, 0x940c, 0x940d, 0x9c2c, 0x9c0d, 0x942d, 0x83ab, 0x838b, 0x940e, 0x5aa9, 0x0840, 0xa4f3, 0xc639, 0xd69a, 0xb5b6, 0xd69a, 0xd6da, 0xd69a, 0xd69a, 0xd6ba, 0xd6ba, 0xd6ba,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xd699, 0x0800, 0x93ef, 0xbd32, 0xaccf, 0xad0f, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4cf, 0xb4f0, 0xb4f0, 0xb4f0, 0xacd0, 0xa46e, 0x93eb, 0x942c, 0x9c2d, 0xa46e, 0xa46f, 0x41a5, 0x3164, 0xa534, 0xb596, 0xb597, 0xb596, 0xb5b6, 0xad75, 0xce79, 0xd6ba, 0xd6ba, 0xd69a, 0xce79, 0xd69a,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffde, 0xffdf, 0xffff, 0xdeda, 0x18a2, 0x5268, 0xb552, 0xb511, 0xacd0, 0xaccf, 0xb4af, 0xb4cf, 0xb4d0, 0xb4cf, 0xb4d0, 0xb4d0, 0xb4d0, 0xb4af, 0xb4cf, 0xbd31, 0xc551, 0xbd31, 0xacaf, 0xa48e, 0xacd0, 0xad12, 0x7b6b, 0x3123, 0x7bce, 0xce99, 0xbe17, 0xbdb6, 0xb595, 0xb575, 0xad55, 0xc618, 0xd69a, 0xce79, 0xce79, 0xdedb, 0xe73c, 0xf7be,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0x83ef, 0x20e1, 0x62c9, 0xacf2, 0xbd72, 0xbd52, 0xbd31, 0xb4d0, 0xb4f0, 0xb4cf, 0xb4d0, 0xacaf, 0xb4d0, 0xb4cf, 0xbd10, 0xc5b3, 0xb531, 0xacf0, 0xacf1, 0x8c0e, 0x41a4, 0x2902, 0xa4d2, 0xb5d7, 0xdedb, 0xdeda, 0xdedb, 0xd69a, 0xce79, 0xef5d, 0xf7be, 0xffdf, 0xf7be, 0xffff, 0xffff, 0xffff, 0xffff,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xf7df, 0xffff, 0xf79d, 0x9cb1, 0x4a06, 0x41c6, 0x83ad, 0xacf2, 0xb512, 0xb4f1, 0xbd32, 0xbd32, 0xb4f1, 0xb4f1, 0xacb0, 0xb532, 0xb532, 0x8bed, 0x62e9, 0x4206, 0x6b2c, 0xb5b5, 0xdefb, 0xdefb, 0xdedb, 0xdedb, 0xd69a, 0xd6ba, 0xdedb, 0xffdf, 0xffff, 0xf7be, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7bf, 0xf7be, 0xffdf, 0xffff, 0xffff, 0xef5c, 0xbd95, 0x946f, 0x8c4f, 0x8c0f, 0x83cd, 0x7b8c, 0x7b8d, 0x738d, 0x83ee, 0x736c, 0x738c, 0x9cd2, 0xded9, 0xfffe, 0xffff, 0xe73d, 0xdefc, 0xd6db, 0xd69b, 0xd69a, 0xce79, 0xdedb, 0xffdf, 0xffdf, 0xffff, 0xffff, 0xffdf, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffde, 0xffde, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffde, 0xffdf, 0xffff, 0xfffe, 0xffde, 0xef5d, 0xef5d, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xf79e, 0xf7be, 0xffdf, 0xffff,
		0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xfffe, 0xffde, 0xffde, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffde, 0xffdf, 0xffdf, 0xfffe, 0xffdf, 0xf7df, 0xffdf, 0xffdf, 0xffdf, 0xfffe, 0xfffe, 0xffde, 0xffde, 0xffbe, 0xffde, 0xffdf, 0xffdf, 0xffdf, 0xffdf, 0xffff, 0xffff, 0xffff, 0xf7be, 0xce79, 0xef5d, 0xffdf, 0xffdf, 0xffff,
		0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffdf, 0xffdf, 0xffdf, 0xffff, 0xffdf, 0xffdf, 0xf7be, 0xffff, 0xce79, 0x9cf3, 0xef5d, 0xffdf, 0xffdf, 0xffdf, 0xffdf,
		0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xf7be, 0xffff, 0x9cd3, 0x9cd3, 0xffff, 0xffdf, 0xf7be, 0xffdf, 0xf7be, 0xdefb,
		0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffdf, 0xffff, 0x9cf3, 0x8410, 0xffff, 0xf7be, 0xffff, 0xf7be, 0xdefb, 0xdefb, 0xffdf,
		0xffdf, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0xffff, 0x8c71, 0x6b4d, 0xffff, 0xf79e, 0xf79e, 0xe71c, 0xdedb, 0xef5d, 0xf7be, 0xef5d

};*/

extern SPI_HandleTypeDef hspi2;
extern SPI_HandleTypeDef hspi1;

void sendCommand(uint8_t data){
	HAL_GPIO_WritePin(CSL_GPIO_Port, CSL_Pin, GPIO_PIN_RESET);
	HAL_GPIO_WritePin(GPIOA, DC_Pin, GPIO_PIN_RESET);

	HAL_SPI_Transmit(&hspi2, &data, 1, 1000);
}

void sendData(uint8_t data){
	HAL_GPIO_WritePin(CSL_GPIO_Port, CSL_Pin, GPIO_PIN_RESET);
	HAL_GPIO_WritePin(GPIOA, DC_Pin, GPIO_PIN_SET);

	HAL_SPI_Transmit(&hspi2, &data, 1, 1000);
}

void setField(uint16_t x0, uint16_t x1, uint16_t y0, uint16_t y1){
	uint8_t hXS = (x0 & 0xff00 >> 8);
	uint8_t lXS = (x0 & 0x00ff);
	uint8_t hXE = (x1 & 0xff00 >> 8);
	uint8_t lXE = (x1 & 0x00ff);

	uint8_t hYS = (y0 & 0xff00 >> 8);
	uint8_t lYS = (y0 & 0x00ff);
	uint8_t hYE = (y1 & 0xff00 >> 8);
	uint8_t lYE = (y1 & 0x00ff);

	sendCommand(CASET);
	sendData(hXS);
	sendData(lXS);
	sendData(hXE);
	sendData(lXE);

	sendCommand(RASET);
	sendData(hYS);
	sendData(lYS);
	sendData(hYE);
	sendData(lYE);
}

void drawPicture(const uint16_t *pic, uint16_t x, uint16_t y){
	setField(2, x - 1 + 2, 1, y - 1 + 1);
	sendCommand(0x2c);
	for(int i=y-1; i>=0;i--){
		for(int j=0; j<x;j++){
			sendData((pic[(i*x)+j] & 0xff00) >> 8);
			sendData(pic[(i*x)+j] & 0x00ff);
		}
	}
}

void drawRectangle(uint16_t x0, uint16_t x1, uint16_t y0, uint16_t y1, uint16_t Color){
	setField(x0 + 2, x1 - 1 + 2, y0 + 1, y1 - 1 + 1);
	uint32_t size = (x0-x1)*(y0-y1);
	sendCommand(0x2c);
	uint8_t hColor = (Color & 0xff00) >> 8;
	uint8_t lColor = Color & 0x00ff;

	for(uint32_t i=0; i<size;i++){
		sendData(hColor);
		sendData(lColor);
	}

}

void displayInit()
{
  HAL_GPIO_WritePin(CSL_GPIO_Port, CSL_Pin, GPIO_PIN_RESET);

  HAL_GPIO_WritePin(GPIOA, RESET_Pin, GPIO_PIN_SET);
  HAL_Delay(5);
  HAL_GPIO_WritePin(GPIOA, RESET_Pin, GPIO_PIN_RESET);
  HAL_Delay(5);
  HAL_GPIO_WritePin(GPIOA, RESET_Pin, GPIO_PIN_SET);
  HAL_Delay(5);

  sendCommand(0x01); //reset
  HAL_Delay(150);
  sendCommand(0x11);  //out of sleep
  HAL_Delay(500);
  sendCommand(0xb1);
  sendData(0x01);
  sendData(0x2C);
  sendData(0x2D);
  sendCommand(0xb2);
  sendData(0x01);
  sendData(0x2C);
  sendData(0x2D);
  sendCommand(0xb3);
  sendData(0x01);
  sendData(0x2C);
  sendData(0x2D);
  sendData(0x01);
  sendData(0x2C);
  sendData(0x2D);
  sendCommand(0xb4);
  sendData(0x07);
  sendCommand(0xc0);
  sendData(0xA2);
  sendData(0x02);
  sendData(0x84);
  sendCommand(0xc1);
  sendData(0xC5);
  sendCommand(0xc2);
  sendData(0x0A);
  sendData(0x00);
  sendCommand(0xc3);
  sendData(0x8A);
  sendData(0x2A);
  sendCommand(0xc4);
  sendData(0x8A);
  sendData(0xEE);
  sendCommand(0xc5);
  sendData(0x0E);
  sendCommand(0x20);
  sendCommand(0x36);  // Режим вывода пикселей (сверху-вниз или снизу-вверх) MV менять гориз между верт
  sendData(0xC0);
  sendCommand(0x3a);  // Режим цвета пикселей (16 бит или 18 бит)
  sendData(0x05);  // 16 bit
  sendCommand(0xe0);  //
  sendData(0x02);
  sendData(0x1c);
  sendData(0x07);
  sendData(0x12);
  sendData(0x37);
  sendData(0x32);
  sendData(0x29);
  sendData(0x2d);
  sendData(0x29);
  sendData(0x25);
  sendData(0x2B);
  sendData(0x39);
  sendData(0x00);
  sendData(0x01);
  sendData(0x03);
  sendData(0x10);
  sendCommand(0xe1);
  sendData(0x03);
  sendData(0x1d);
  sendData(0x07);
  sendData(0x06);
  sendData(0x2E);
  sendData(0x2C);
  sendData(0x29);
  sendData(0x2D);
  sendData(0x2E);
  sendData(0x2E);
  sendData(0x37);
  sendData(0x3F);
  sendData(0x00);
  sendData(0x00);
  sendData(0x02);
  sendData(0x10);
  sendCommand(0x13);  // Normal Display Mode On
  HAL_Delay(10);
  sendCommand(0x29);  // Display On
  HAL_Delay(100);
  HAL_GPIO_WritePin(CSL_GPIO_Port, CSL_Pin, GPIO_PIN_SET);

}


void SD_write(uint8_t *data){
	uint8_t receiveData;
	HAL_SPI_TransmitReceive(&hspi1,(uint8_t *) &data, &receiveData, 1, 100);
}

uint8_t SD_read(){
	uint8_t receiveData;
	if(HAL_SPI_TransmitReceive(&hspi1, (uint8_t*) 0xff, &receiveData, 1, 100) != HAL_OK){
		return 5;
	}
	return receiveData;
}

uint8_t SD_WriteCommand(uint8_t cmd, uint32_t arg){
	uint8_t res;
	uint8_t sCRC = 0x01;
	SD_CS_DESELECT();
	SD_read();
	SD_CS_SELECT();
	SD_read();
	SD_write(&cmd);
	SD_write((uint8_t *) (arg>>24));
	SD_write((uint8_t *) (arg>>16));
	SD_write((uint8_t *) (arg>>8));
	SD_write((uint8_t *) arg);
	if (cmd == CMD0) {sCRC = 0x95;}
	SD_write(&sCRC);
	do{
		res = SD_read();
	}while(res & 0x80);
	return res;
}

uint8_t sdCardInit(){
	hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128; //256 kbits/s
	HAL_SPI_Init(&hspi1);
	SD_CS_DESELECT(); // CS is pull-up
	for(int i=0; i<10;i++){
		SD_read();
	}
	hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_2; //18 Mbits/s
	HAL_SPI_Init(&hspi1);
	SD_CS_SELECT();
	if(SD_WriteCommand(CMD0, 0) == 1){
		return 0;
	}
	return 1;
}

void App_main(){
	displayInit();
//	sdCardInit();
	drawRectangle(0, 128, 0, 160, 0x0000);
//	drawRectangle(0, 6, 0, 6, 0x001f);
	drawPicture((uint16_t *) 0x08002170,128, 160);
}
